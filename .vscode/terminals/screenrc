# ImmorTerm - Project Screen Configuration
# This file is placed in {project}/.vscode/terminals/screenrc

# Disable alternate screen buffer for native VS Code scrolling
# Note: Removed hs:ts:fs:ds (status line sequences) to prevent title flicker
# VS Code tab title is set by screen-auto's OSC sequence instead
termcapinfo xterm* ti@:te@

# Allow programs inside screen to dynamically change the window title
defdynamictitle on

# Backtick command for memory monitoring (updates every 5 seconds)
# backtick id lifespan autorefresh command
backtick 1 5 5 $SCREEN_PROJECT_DIR/.vscode/terminals/screen-mem

# Status bar at bottom with memory display
hardstatus on
hardstatus alwayslastline '%{= kK}%=%n: %t %{= kg}| %{= kc}MEM: %1`%='

# Use 256 colors with UTF-8 support
term screen-256color
truecolor on
defutf8 on
utf8 on on

# Large scrollback buffer
defscrollback 20000

# Disable startup message
startup_message off

# Disable visual bell
vbell off

# Auto-detach on hangup (keeps session alive if VS Code closes)
autodetach on

# Use shell wrapper that sources shell-init.zsh before starting interactive shell
shell $SCREEN_PROJECT_DIR/.vscode/terminals/shell-wrapper.zsh

# Don't set shelltitle - let screen-auto and extension control the title
# (shelltitle "$WINDOW" would use window NUMBER, not the friendly name)
# defdynamictitle on is already set above to allow dynamic title changes
